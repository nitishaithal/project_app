{"filter":false,"title":"user.rb","tooltip":"/app/models/user.rb","undoManager":{"mark":10,"position":10,"stack":[[{"group":"doc","deltas":[{"start":{"row":29,"column":2},"end":{"row":33,"column":5},"action":"remove","lines":[" # Returns true if the given token matches the digest.","  def authenticated?(remember_token)","     return false if remember_digest.nil?","    BCrypt::Password.new(remember_digest).is_password?(remember_token)","  end"]},{"start":{"row":29,"column":2},"end":{"row":34,"column":5},"action":"insert","lines":[" # Returns true if the given token matches the digest.","  def authenticated?(attribute, token)","    digest = send(\"#{attribute}_digest\")","    return false if digest.nil?","    BCrypt::Password.new(digest).is_password?(token)","  end"]}]}],[{"group":"doc","deltas":[{"start":{"row":35,"column":2},"end":{"row":36,"column":0},"action":"insert","lines":["",""]},{"start":{"row":36,"column":0},"end":{"row":36,"column":2},"action":"insert","lines":["  "]}]}],[{"group":"doc","deltas":[{"start":{"row":36,"column":2},"end":{"row":37,"column":0},"action":"insert","lines":["",""]},{"start":{"row":37,"column":0},"end":{"row":37,"column":2},"action":"insert","lines":["  "]}]}],[{"group":"doc","deltas":[{"start":{"row":36,"column":2},"end":{"row":46,"column":0},"action":"insert","lines":["  # Activates an account.","  def activate","    update_attribute(:activated,    true)","    update_attribute(:activated_at, Time.zone.now)","  end","","  # Sends activation email.","  def send_activation_email","    UserMailer.account_activation(self).deliver_now","  end",""]}]}],[{"group":"doc","deltas":[{"start":{"row":1,"column":2},"end":{"row":1,"column":50},"action":"remove","lines":["attr_accessor :remember_token, :activation_token"]},{"start":{"row":1,"column":2},"end":{"row":1,"column":65},"action":"insert","lines":[" attr_accessor :remember_token, :activation_token, :reset_token"]}]}],[{"group":"doc","deltas":[{"start":{"row":46,"column":0},"end":{"row":47,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":47,"column":0},"end":{"row":47,"column":2},"action":"insert","lines":["  "]}]}],[{"group":"doc","deltas":[{"start":{"row":47,"column":2},"end":{"row":57,"column":5},"action":"insert","lines":[" # Sets the password reset attributes.","  def create_reset_digest","    self.reset_token = User.new_token","    update_attribute(:reset_digest,  User.digest(reset_token))","    update_attribute(:reset_sent_at, Time.zone.now)","  end","","  # Sends password reset email.","  def send_password_reset_email","    UserMailer.password_reset(self).deliver_now","  end"]}]}],[{"group":"doc","deltas":[{"start":{"row":58,"column":2},"end":{"row":59,"column":0},"action":"insert","lines":["",""]},{"start":{"row":59,"column":0},"end":{"row":59,"column":2},"action":"insert","lines":["  "]}]}],[{"group":"doc","deltas":[{"start":{"row":59,"column":2},"end":{"row":60,"column":0},"action":"insert","lines":["",""]},{"start":{"row":60,"column":0},"end":{"row":60,"column":2},"action":"insert","lines":["  "]}]}],[{"group":"doc","deltas":[{"start":{"row":59,"column":2},"end":{"row":62,"column":5},"action":"insert","lines":["# Returns true if a password reset has expired.","  def password_reset_expired?","    reset_sent_at < 2.hours.ago","  end"]}]}]]},"ace":{"folds":[],"scrolltop":622,"scrollleft":0,"selection":{"start":{"row":62,"column":5},"end":{"row":62,"column":5},"isBackwards":true},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":50,"state":"start","mode":"ace/mode/ruby"}},"timestamp":1424258255488,"hash":"0a7bcb5bc32bf41e1a734764be51914bdb4a2917"}